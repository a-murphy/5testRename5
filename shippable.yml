language: none

env:
  #- secure: kaJS5qZyZ17KuNZACYt8iaP8Orrstr1j2nYAu7WzIPn2n0L/wN+0F1nFYYGdKkJziQbsNP7lEn/RfvSBQYTzT/ygWs31s7XReGT+9090BJBfDRDSU5tAcJvE6yGic4GmwQh7+aB+2EAGQ1XcxK2j5Y2WS0/ocziXFx5CtnlwyjOA9LnIMTIi6RXJx3Im8aYnq8degdf+KMM6u0qoGE0JBY8PXyOU8QgEvLKghn/eG+d9YD61ZbxGpuyuFmsl4EEGcLgVqqkDovZGIbDpqxYZBPrKxtOwQEOwc41FvyYiNXeRCKdRBL4PAEeH1NrnPzoyqZBhpxNmVZsE+0t+BkBgPw== 
  - PHP_VERSION: '5.6'
  - TWO: true

build:
  pre_ci:
    - echo "testing $SHIPPABLE_AMI_VERSION"
    - docker pull shippable/minv2:latest
    - docker pull drydock/u14javall:prod
    - docker pull drydock/u16javall:v5.8.2    
    - docker pull drydock/u16javall:v6.1.4
    - docker pull drydock/u16javall:v5.10.4
    - docker pull drydock/u14scaall:prod
    - docker pull drydock/u12scaall:prod
    - docker pull drydock/u16scaall:v5.9.4    
    - docker pull drydock/u16scaall:v6.2.4
    - docker pull drydock/u16scaall:v5.12.1
    - docker pull drydock/u14ruball:prod
    - docker pull drydock/u12ruball:prod
    - docker pull drydock/u16ruball:v5.8.2    
    - docker pull drydock/u16ruball:v6.1.4
    - docker pull drydock/u16ruball:v6.2.4

  pre_ci_boot:
    image_tag: $SHIPPABLE_AMI_VERSION
    options: "-v $SHIPPABLE_BUILD_DIR:$SHIPPABLE_BUILD_DIR"
  ci:
    - echo $SHIPPABLE_AMI_VERSION
    - docker images
 #   - if [ $TWO = true ]; then fail; fi
 #   - if [ $TWO = true ]; then shipctl post_resource_state 123-testing-123 versionName $BRANCH.$BUILD_NUMBER; fi
  on_failure:
    - echo "failed $SHIPPABLE_AMI_VERSION"

integrations:
  notifications:
    - integrationName: email
      type: email
      recipients:
        - aidan.shippable@outlook.com
        - aidan@shippable.com
      on_success: always
      sendFailingSnippet: true
#    - integrationName: webhookintegration1
#      type: webhook
#      payload:
#        - test=$BRANCH
