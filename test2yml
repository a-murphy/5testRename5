resources:
- name: repo
  type: GitRepo
  configuration:
    path: a-murphy/5testRename5
    gitProvider: aidan_github
pipelines:
- name: packaging
  steps:
    - name: bump_version
      type: Bash
      configuration:
        affinityGroup: chart
        environmentVariables:
          chart: chartName
          appVersion: ''
          segment: patch
        inputResources:
        - name: repo
          trigger: false
      execution:
        onExecute:
        - pushd $res_repo_resourcePath
        - options="-c ${chart} -s ${segment} "
        - |
          [[ -n "${appVersion}" ]] && options="-a ${appVersion}"
        - scripts/bump.sh ${options}
        - echo "Creating new version for ${chart} using ${appVersion}"
        - popd
