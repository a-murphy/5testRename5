resources:
  - name: gitRepoResourceDocker
    type: GitRepo
    configuration:
      gitProvider: aidan_github
      path: a-murphy/5testRename5
      branches:
        include: dockerpipelines
  
  - name: outputDockerBuildInfo
    type: BuildInfo
    configuration:
      sourceArtifactory: aidan_artifactory
      buildName: test
      buildNumber: 1
  - name: outputDockerBuildInfo2
    type: BuildInfo
    configuration:
      sourceArtifactory: aidan_artifactory
      buildName: test
      buildNumber: 1
  - name: outputDockerBuildInfo3
    type: BuildInfo
    configuration:
      sourceArtifactory: aidan_artifactory
      buildName: test
      buildNumber: 1
  - name: outputDockerBuildInfo4
    type: BuildInfo
    configuration:
      sourceArtifactory: aidan_artifactory
      buildName: test
      buildNumber: 1
      
pipelines:
  - name: test_pipeline_1
    steps:
      - name: docker_build
        type: DockerBuild
        configuration:
          affinityGroup: group
 #         dockerFileLocation: .
 #         dockerFileName: Dockerfile
          dockerImageName: hts1-docker-local.jfrog.io/docker-local/pipelinestestimage
          dockerImageTag: $run_number
          dockerOptions: "--build-arg RUN_NUMBER=${run_number}"
          inputResources:
            - name: gitRepoResourceDocker
              trigger: false
      - name: docker_push
        type: DockerPush
        configuration:
          affinityGroup: group
          targetRepository: docker-local
          autoPublishBuildInfo: true
          inputSteps:
            - name: docker_build
          outputResources:
            - name: outputDockerBuildInfo
          integrations:
            - name: aidan_artifactory
            
  - name: test_pipeline_2
    steps:
      - name: docker_build
        type: DockerBuild
        configuration:
          affinityGroup: group
          dockerImageName: hts1-docker-local.jfrog.io/docker-local/pipelinestestimage2
          dockerImageTag: $run_number
          dockerOptions: "--build-arg RUN_NUMBER=${run_number}"
          inputResources:
            - name: gitRepoResourceDocker
              trigger: false
      - name: docker_push
        type: DockerPush
        configuration:
          affinityGroup: group
          targetRepository: docker-local
          autoPublishBuildInfo: true
          inputSteps:
            - name: docker_build
          outputResources:
            - name: outputDockerBuildInfo2
          integrations:
            - name: aidan_artifactory
            
  - name: test_pipeline_3
    steps:
      - name: docker_build
        type: DockerBuild
        configuration:
          affinityGroup: group
          dockerImageName: hts1-docker-local.jfrog.io/docker-local/pipelinestestimage3
          dockerImageTag: $run_number
          dockerOptions: "--build-arg RUN_NUMBER=${run_number}"
          inputResources:
            - name: gitRepoResourceDocker
              trigger: false
      - name: docker_push
        type: DockerPush
        configuration:
          affinityGroup: group
          targetRepository: docker-local
          autoPublishBuildInfo: true
          inputSteps:
            - name: docker_build
          outputResources:
            - name: outputDockerBuildInfo3
          integrations:
            - name: aidan_artifactory
            
  - name: test_pipeline_4
    steps:
      - name: docker_build
        type: DockerBuild
        configuration:
          affinityGroup: group
          dockerImageName: hts1-docker-local.jfrog.io/docker-local/pipelinestestimage4
          dockerImageTag: $run_number
          dockerOptions: "--build-arg RUN_NUMBER=${run_number}"
          inputResources:
            - name: gitRepoResourceDocker
              trigger: false
      - name: docker_push
        type: DockerPush
        configuration:
          affinityGroup: group
          targetRepository: docker-local
          autoPublishBuildInfo: true
          inputSteps:
            - name: docker_build
          outputResources:
            - name: outputDockerBuildInfo4
          integrations:
            - name: aidan_artifactory
            
            
            
            
           
      
