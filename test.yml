resources:
  - name: fileIntegrationResource
    type: file
    fileLocation: location
    configuration:
      files:
        except:      file
        only:        file       
      integrationName: fileServerIntegration 
    initialVersion:
      fileName: file
      fileDtTm: test6
  - name: sample_java_file_test
    type: file
    fileLocation: text.js
    configuration:
      integrationName: fileServerIntegration
    initialVersion:
      fileName:
        test: test
        test2: test
  - name: file_test
    type: file
    fileLocation: text.js
    configuration:
      integrationName: fileServerIntegration
       
pipelines:
  - name: test_pipeline_1
    setup:
      environmentVariables:
        readOnly:
          - ENV1: value-pipe-1
          - ENV2: value-pipe-2
      runtime:            
        type: image
        image:
          auto: true
          language: java
          versions: v1.1
        custom:
          name: test
          tag: test
          options: test
    steps:
      - name: in_trigger_step
        type: bash
        configuration:
          affinityGroup: test_group 
        setup:
          environmentVariables:
            normal:
              - ENV1: value1
              - ENV2: value2
            encrypted:
              - SECURE_ENV1: test_value
              - SECURE_ENV2: test_value
          runtime:            
            type: image
            image:
              auto: true
              language: java
              versions: v1.1
            custom: 
              name: test
              tag:  test
              options: test
        execution:
          onExecute:
            - echo "executing task command 1"
            - echo "executing task command 2"

      - name: main_step
        type: bash
        setup:
          environmentVariables:
            normal:
              - ENV1: value1
              - ENV2: value2
            encrypted:
              - SECURE_ENV1: test_value
              - SECURE_ENV2: test_value
          runtime:            
            type: host
            image:
              auto: true
              language: java
              versions: v1.1
            custom: 
              name: test
              tag:  test
              options: test
        requires:
          integrations:
            - github-subint
        triggeredBy:
          steps:
            - in_trigger_step
        execution:
          onStart:
            - echo "Prepping build environment"
          onExecute:
            - echo "executing task command 1"
            - echo "executing task command 2"
          onSuccess:
            - echo "Job well done!"
          onFailure:
            - echo "uh oh, something went wrong"
          onComplete: #always
            - echo "Cleaning up some stuff"
          onCancel:
            - echo "Someone cancelled the job"
        outputResources:
          - sample_java_file_test
      - name: other_step
        type: bash
        setup:
          environmentVariables:
            normal:
              - ENV1: value11
              - ENV2: value21
            encrypted:
              - SECURE_ENV1: test_value1
              - SECURE_ENV2: test_value1
          runtime:            
            type: host
            image:
              auto: true
              language: java
              versions: v1.1
            custom: 
              name: test
              tag:  test
              options: test
        requires:
          resources:
            - sample_java_file_test
          integrations:
            - github-subint
        triggeredBy:
          steps:
            - main_step
        execution:
          onStart:
            - echo "Prepping build environment"
          onExecute:
            - echo "executing task command 1"
            - echo "executing task command 2"
          onSuccess:
            - echo "Job well done!"
          onFailure:
            - echo "uh oh, something went wrong"
          onComplete: #always
            - echo "Cleaning up some stuff"
          onCancel:
            - echo "Someone cancelled the job"
